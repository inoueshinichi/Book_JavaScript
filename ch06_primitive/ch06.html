<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- 文字セット -->
  <meta charset="UTF-8">

  <!-- レイアウト -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Webページの説明 -->
  <title>Web</title>
  <meta name="description" content="Webページの説明">
  <meta name="keywords" content="キーワード">

  <!-- OGP設定 -->
  <meta property="og:local" content="ja_JP" />
  <meta property="og:type" content="ウェブサイト名" />
  <meta property="og:title" content="" />
  <meta property="og:description" content="" />
  <meta property="og:url" content="" />
  <meta property="og:site_name" content="" />
  <meta property="og:image" content="" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <header>
        <nav>Ch04 Object (Header)</nav>
    </header>

    <main>
        <div class="container">
            <div>
                Objectクラス
            </div>
        </div>
    </main>

    <footer>
        <nav>Ch04 Object (footer)</nav>
    </footer>

    <script type="module" defer>
        "use strict"
        // プリミティブ型
        // Boolean
        // Number
        // BigInt
        // String
        // Symbol
        // ---
        // Function
        // RegExp
        // Object
        // Array
        // globalThis
        // Null
        // Undefined

        // globalThis
        console.log(globalThis)

        // 暗黙的なボックス化
        console.log(42n.toString())
        console.log(true.toString())

        // 明示的なボックス化
        console.log(Object(true))
        console.log(new Object(false))
        console.log(Object(42))
        console.log(new Object(42))

        // Object -> プリミティブ型　：　逆変換
        console.log(Object(true).valueOf()) // true
        console.log(Object(42).valueOf()) // 42

        console.log("プリミティブに変換")

        console.log(Boolean(1)) // true

        // falsy
        console.log(Boolean(0)) // false
        console.log(Boolean(undefined)) // false
        console.log(Boolean(null)) // false

        // -> Number
        console.log(Number(Object(42))) // 42
        console.log(Number(true)) // 1
        console.log(Number(undefined)) // NaN
        console.log(Number(null)) // 0
        console.log(Number("51")) // 51
        console.log(Number("4e2")) // 400
        console.log(Number("42n")) // NaN

        /* Booleanオブジェクト */

        // オブジェクトとしてのBooleanをプリミティブの真偽値のように使用すると
        // 全てtrueと判断してしまう。。。
        const falseObject = new Boolean(false)
        console.log(falseObject)
        console.log("falseObject ? 'true' : 'false'", falseObject ? "true" : "false")

        // Javascriptで偽としてみなされる値
        // false
        // null
        // undefined
        // 0
        // 0n
        // 空もじ
        // NaN
        // だけ！

        /* Numberオブジェクト */
        console.log(new Number(54)) // Number {}
        console.log(+new Number(54)) // 54
        console.log(new Number(6) * new Number(9)) // 54

        console.log(Number.MAX_VALUE)
        console.log(Number.MAX_VALUE + 1) // 増えない
        console.log(Number.MAX_VALUE + Number.MAX_VALUE) // Infinity

        console.log(Number.MIN_VALUE)
        console.log(Number.MIN_VALUE - 1) // -1
        console.log(Number.MAX_VALUE / 1.9) // 変わらない
        console.log(Number.MIN_VALUE / 2) // 0

        /* 浮動小数点数
            符号部 : 1bit
            指数部 : 11bit
            仮数部 : 52bit
            IEEE754 : 数値の最上位の1が必ず53bit目に来るように指数を調整
        */

        // 様々な最大値と最小値
        console.log("Number.MAX_VALUE", Number.MAX_VALUE)
        console.log("Number.MIN_VALUE", Number.MIN_VALUE) // 最小精度
        console.log("Number.MAX_VALUE + 100", Number.MAX_VALUE + 100)
        console.log("Number.MAX_VALUE + Number.MAX_VALUE", Number.MAX_VALUE + Number.MAX_VALUE)

        // 最小精度 : 最小値を1よりも大きな数で割ったとしても値は変わらないか or 0になる.
        console.log("Number.MIN_VALUE", Number.MIN_VALUE)
        console.log("Number.MIN_VALUE/1.9", Number.MIN_VALUE/1.9)
        console.log("Number.MIN_VALUE/2", Number.MIN_VALUE/2)

        // MIN_VALUE と MAX_VALUEの外の範囲は値の刻みが一定でない.
        // 仮数が1増えると実際は数値が2^<指数>だけ増加する.
        // 1刻みの表現ができない
        console.log("Number.MAX_SAFE_INTEGER", Number.MAX_SAFE_INTEGER)
        console.log("Number.MIN_SAFE_INTEGER", Number.MIN_SAFE_INTEGER)
        console.log("仮数部だけを使用して整数を表現した最大値と符号ビットを組み合わせた値")
        console.log("2**53 - 1", 2**53 - 1)
        console.log("Number.MAX_SAFE_INTEGER + 1", Number.MAX_SAFE_INTEGER + 1)
        console.log("Number.MAX_SAFE_INTEGER + 2", Number.MAX_SAFE_INTEGER + 2)
        console.log("Number.MAX_SAFE_INTEGER + 3", Number.MAX_SAFE_INTEGER + 3)
        console.log("Number.MAX_SAFE_INTEGER + 4", Number.MAX_SAFE_INTEGER + 4)
        console.log("仮数が1増えると実際は数値が2^<指数>だけ増加する. 1刻みで数値を表現できない.")

        // 安全域の整数チェック : MIN_VALUE <= x <= MAX_VALUE の範囲をチェック
        console.log("Number.isSafeInteger(42)", Number.isSafeInteger(42))
        console.log("Number.isaSafeInteger(3.14)", Number.isSafeInteger(3.14))

        console.log("単に整数をチェック")
        console.log("Number.isInteger(1)", Number.isInteger(1))
        console.log("Number.isInteger(Number.MAX_VALUE)", Number.isInteger(Number.MAX_VALUE))

        // 無限大(Infinity)とNaN
        console.log("Number.POSITIVE_INFINITY", Number.POSITIVE_INFINITY)
        console.log("Number.NEGATIVE_INFINITY", Number.NEGATIVE_INFINITY)
        console.log("10**10**10**122", 10**10**10**122)
        console.log("1/0", 1/0)

        console.log("Infinity +-*/ ????")
        console.log(Infinity + Number.MAX_VALUE)
        console.log(Infinity - Number.MAX_VALUE)
        console.log(Infinity * Number.MAX_VALUE)
        console.log(Infinity / Number.MAX_VALUE)

        console.log(Infinity === Infinity)
        console.log(Number.POSITIVE_INFINITY === Infinity)
        console.log(Number.isFinite(Infinity))

        console.log("0/0", 0/0)
        console.log("Number.NaN", Number.NaN)
        console.log("Infinity / Infinity", Infinity / Infinity)
        console.log("Infinity - Infinity", Infinity - Infinity)
        console.log("Infinity * 0", Infinity * 0)
        console.log("Number.isNaN(0/0)", Number.isNaN(0/0))

        // NaNにはどんな値と比較してもfalseになる
        console.log(NaN === NaN)
        console.log(NaN == NaN)
        console.log(NaN == 0)

        /*
         Infinity 0 11111111111 000....000
        -Infinity 1 11111111111 000....000
         NaN.     0 11111111111 000....001 
         NaN.     0 11111111111 000....010
        */

        // 文字列から数値に変換する
        console.log("文字列から数値に変換する")
        console.log(Number.parseFloat("3.14"))
        console.log(Number.parseFloat("10e-4"))
        console.log(Number.parseFloat(". -1.2です"))
        console.log(Number.parseFloat(true)) // NaN
        console.log(Number.parseInt("100"))
        console.log(Number.parseInt("3.14"))
        console.log(Number.parseInt("10e3"))

        console.log(Number.parseInt("11", 2)) // 3
        console.log(Number.parseInt('hello', 36))
        console.log(Number.parseInt("11", 100))

        console.log(Number.parseInt("0b11")) // 0
        console.log(Number.parseInt("011"))  // 11
        console.log(Number.parseInt("0xff")) // 255

        console.log("数値から文字列に変換する")
        // toString()
        // toLocalString()
        // toFixed()
        // toExponential()
        // toPrecision()
        console.log((42).toString()) // 42
        console.log((42).toString(2)) // 101010
        console.log(9.80665.toString(16))
        console.log(9.80665.toString(36))

        console.log((42).toFixed(3))
        console.log((42).toExponential(4))
        console.log((42).toPrecision(5))
        console.log((42).toPrecision(1))


        /* BigIntオブジェクト
            長整数
            ・巨大な整数を保持できる
            ・通常の数値と組み合わせて演算できない
            ・Mathオブジェクトが提供するメソッドの引数にもできない
        */

        console.log("BigInt(6.02214179e23)", BigInt(6.02214179e23))
        console.log("BigInt('0x7f8618974d08a8000000')", BigInt('0x7f8618974d08a8000000'))
        console.log("BigInt(true)", BigInt(true))
        // console.log("new BigInt(42)", new BigInt(42)) // Uncaught TypeError: BigInt is not aconstructor

    </script>

</body>
</html>